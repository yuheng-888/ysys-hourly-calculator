<UserControl x:Class="AutoSoundTimeV3.Views.AutoModeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:AutoSoundTimeV3.Models">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,10">
            <Button Content="添加文件" Command="{Binding AddFilesCommand}" Padding="10,6" Margin="0,0,8,0" />
            <Button Content="清空" Command="{Binding ClearFilesCommand}" Padding="10,6" />
        </StackPanel>

        <ListView Grid.Row="1" ItemsSource="{Binding AudioFiles}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="文件名" Width="420" DisplayMemberBinding="{Binding FileName}" />
                    <GridViewColumn Header="时长" Width="120" DisplayMemberBinding="{Binding DurationText}" />
                </GridView>
            </ListView.View>
        </ListView>

        <Border Grid.Row="2" Margin="0,10,0,0" Padding="10" BorderBrush="{DynamicResource App.Border}" Background="{DynamicResource App.Panel}" BorderThickness="1" CornerRadius="6">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="时薪" VerticalAlignment="Center" />
                <TextBox Text="{Binding HourlyRate, UpdateSourceTrigger=PropertyChanged}" Width="80" Margin="6,0,10,0" />

                <TextBlock Text="分钟费率" VerticalAlignment="Center" />
                <TextBox Text="{Binding MinuteRate, UpdateSourceTrigger=PropertyChanged}" Width="80" Margin="6,0,10,0" />

                <TextBlock Text="计算方式" VerticalAlignment="Center" />
                <ComboBox SelectedValue="{Binding SelectedUnit}" SelectedValuePath="Tag" Width="110" Margin="6,0,10,0">
                    <ComboBoxItem Content="按小时" Tag="{x:Static models:DurationUnit.Hour}" />
                    <ComboBoxItem Content="按分钟" Tag="{x:Static models:DurationUnit.Minute}" />
                </ComboBox>

                <TextBlock Text="总时长" Margin="10,0,4,0" VerticalAlignment="Center" />
                <TextBlock Text="{Binding TotalDurationText}" FontWeight="Bold" VerticalAlignment="Center" />

                <TextBlock Text="金额" Margin="10,0,4,0" VerticalAlignment="Center" />
                <TextBlock Text="{Binding CalculatedSalaryText}" FontWeight="Bold" VerticalAlignment="Center" />
            </StackPanel>
        </Border>

        <Border Grid.Row="3" Margin="0,10,0,0" Padding="10" BorderBrush="{DynamicResource App.Border}" Background="{DynamicResource App.Panel}" BorderThickness="1" CornerRadius="6">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="项目" VerticalAlignment="Center" />
                <TextBox Text="{Binding ProjectName}" Width="140" Margin="6,0,10,0" />

                <TextBlock Text="制作人" VerticalAlignment="Center" />
                <TextBox Text="{Binding Producer}" Width="120" Margin="6,0,10,0" />

                <TextBlock Text="日期" VerticalAlignment="Center" />
                <DatePicker SelectedDate="{Binding CalculationDate}" Width="130" Margin="6,0,10,0" />

                <Button Content="加入团队结算" Command="{Binding AddToTeamCommand}" Padding="10,6" />
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
